(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n.p+"static/media/menu.c159867d.svg"},,function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(5),r=n.n(s),o=(n(13),n(1));n(14),n(15);function l(e,t,n,a){for(var i=void 0,s=void 0,r=void 0,o=void 0,l=void 0,c=0,d=0,m=0;m<t.length;m++)"{"===t[m]?c=m:"}"===t[m]&&(d=++m);if(c&&!d)return{failure:!0,msg:"entered JSON string '"+t.slice(c,t.length-1)+"' was missing a closing bracket"};if(c){try{i=JSON.parse(t.slice(c,d))}catch(E){return{failure:!0,msg:"entered JSON string '"+t.slice(c,d)+"' was invalid. Did you remember to put quotes?"}}var u=t.substring(0,c),p=void 0;d+1<t.length&&(p=t.substring(d+1,t.length)),t=void 0!==p?u+" "+p:u}var f=t.split(" "),g=[];f.forEach((function(e){0!==e.length&&g.push(e)}));var h=0;if("node"!==(f=g)[h]&&"n"!==f[h]||h++,isNaN(f[h]))return{failure:!0,msg:"Node id '"+f[h]+"' is invalid"};if(s=parseInt(f[h]),"read"===f[++h]||"r"===f[h]){if(r="read","item"!==f[++h]&&"i"!==f[h]||h++,isNaN(f[h]))return{failure:!0,msg:"Item id must be a number, input was '"+f[h]+"'"};o=parseInt(f[h]),h++}else if("update"===f[h]||"u"===f[h]||"write"===f[h]||"w"===f[h]){if(r="update","item"!==f[++h]&&"i"!==f[h]||h++,isNaN(f[h]))return{failure:!0,msg:"Item id must be a number, input was '"+f[h]+"'"};o=parseInt(f[h]),h++}else if("insert"===f[h]||"i"===f[h])r="insert","item"!==f[++h]&&"i"!==f[h]||h++;else{if("delete"!==f[h]&&"d"!==f[h])return{failure:!0,msg:"operation '"+f[h]+"' not recognized"};if(r="delete","item"!==f[++h]&&"i"!==f[h]||h++,isNaN(f[h]))return{failure:!0,msg:"Item id must be a number, input was '"+f[h]+"'"};o=parseInt(f[h]),h++}if(h<f.length&&("delay"===f[h]||"d"===f[h])){if(h++,isNaN(f[h]))return{failure:!0,msg:"delay must be followed by a number, "+f[h]+" is not a number"};l=parseInt(f[h]),h++}if(!n)return{failure:!1};if(n&&!a)return{failure:!0,msg:"A network to perform the operations on must be provided"};var y=a.getNode(s),v=100*l;return"read"===r?y.read(o,v,e):"delete"===r?y.delete(o,v,e):"insert"===r?y.insert(i,v,e):"update"===r?y.update(o,i,v,e):void 0}function c(e){for(var t="[{",n=0;n<e.dataRange.length;n++)t=t.concat(e.dataRange[n].start+" => "+e.dataRange[n].end),n+1<e.dataRange.length&&(t=t.concat("}, {"));t=t.concat("}]");for(var a="<span style=''>[</span></br>",i=e.dataSlice.entries(),s=i.next().value;s;)a=a.concat("<span style='color: #f0d976'>{</span>itemId: "+s[0]+", "),Object.keys(s[1]).forEach((function(e){a=a.concat(e+": "+s[1][e]+", ")})),a=a.slice(0,-2),a=(s=i.next().value)?a.concat("<span style='color: #f0d976'>}</span>,</br>"):a.concat("<span style='color: #f0d976'>}</span></br>");a=a.concat("<span style=''>]</span>");var r=JSON.stringify(e.clock);return r=(r=r.split("[")[1]).split("]")[0],r="<span style='color: #18cdfa'>[</span>".concat(r).concat("<span style='color: #18cdfa'>]</span>"),"<h3 class='nodeinfo-h3'>node "+e.id+" info</h3><span style='color: #f1ef43'>clock: </span>"+r+"</br><span style='color: #f1ef43'>connections: </span>"+JSON.stringify(e.connections)+"</br><span style='color: #f1ef43'>dataRange: </span>"+t+"</br><span style='color: #f1ef43'>dataSlice: </span>"+a}var d=function(e){var t=Object(a.useState)(void 0),n=Object(o.a)(t,2),s=n[0],r=n[1];Object(a.useEffect)((function(){e.rerenderSim&&(l(),d(e.net.numNodes),m(e.net.numNodes))}),[e.rerenderSim]),Object(a.useEffect)((function(){l()}),[]),Object(a.useEffect)((function(){e.net&&(d(e.net.numNodes),m(e.net.numNodes))}),[e.net]),Object(a.useEffect)((function(){e.apiResponse&&void 0===s&&(console.log("received api response! ",e.apiResponse),e.setFinishedExecuting(!1),r(0))}),[e.apiResponse]),Object(a.useEffect)((function(){if(void 0!==s)if(s!==e.sentInstructions.length){e.sentInstructions[s].forEach((function(t){for(var n=t.instrId,a=0;a<e.apiResponse.length;a++)if(e.apiResponse[a].instrId===n){u(e.apiResponse,a,"wait"===document.getElementById("run").innerHTML);break}})),"wait"===document.getElementById("run").innerHTML&&(document.getElementById("run").innerHTML="pause")}else{console.log("executed all blocks!"),e.setFinishedExecuting(!0),r(void 0);for(var t=0;t<e.network.numNodes;t++)e.mostRecentNodeInfo.set(t,c(e.network.getNode(t)))}}),[s]);var l=function(){var e=document.getElementById("sim-wrapper").offsetWidth,t=document.getElementById("sim-wrapper").offsetHeight;if(t>e){var n=document.getElementById("circle-wrapper").offsetWidth;document.documentElement.style.setProperty("--circle-wrapper-height",n+"px"),document.documentElement.style.setProperty("--sim-wrapper-vertical-padding",(document.getElementById("sim-wrapper").offsetHeight-n)/2+"px"),document.getElementById("sim-wrapper").style.height=t+"px"}else t<e&&document.documentElement.style.setProperty("--circle-wrapper-width",document.getElementById("circle-wrapper").offsetHeight+"px")},d=function(t){var n=document.getElementById("circle-wrapper").offsetWidth/7;document.documentElement.style.setProperty("--node-diameter",n+"px");for(var a=function(n){var a=document.createElement("div");a.setAttribute("class","dot"),a.setAttribute("id",n.toString());var i=document.createTextNode(n.toString());a.appendChild(i);var r=360/t*n;s=document.getElementById("circle-wrapper").offsetWidth/2+"px",document.getElementById(n.toString())&&document.getElementById(n.toString()).remove(),document.getElementById("circle-wrapper").append(a),document.getElementById(n.toString()).style.transform="rotate(-90deg) rotate("+r+"deg) translate("+s+") rotate(-"+r+"deg) rotate(90deg)",document.getElementById(n.toString()).style.lineHeight=document.getElementById(n.toString()).offsetWidth-2+"px",document.getElementById(n.toString()).addEventListener("click",(function(t){e.getNodeInfo(n)}))},i=0;i<t;i++){var s;a(i)}var r=[];e.net.nodeMap.forEach((function(e){e.connections.forEach((function(t){if(r.findIndex((function(n){return n[0]===e.id&&n[1]===t||n[1]===e.id&&n[0]===t}))<0){var n=function(e,t){var n=p(e),a=p(t),i=n.left+n.width/2,s=n.top+n.height/2,r=a.left+a.width/2,o=a.top+a.height/2,l=Math.sqrt((r-i)*(r-i)+(o-s)*(o-s)),c=(i+r)/2-l/2,d=(s+o)/2-1,m=Math.atan2(s-o,i-r)*(180/Math.PI),u=document.createElement("div");return u.style.padding="0px",u.style.margin="0px",u.style.height="2px",u.style.backgroundColor="#282c34",u.style.lineHeight="1px",u.style.position="absolute",u.style.left=c+"px",u.style.top=d+"px",u.style.width=l+"px",u.style.transform="rotate("+m+"deg)",u}(document.getElementById(e.id.toString()),document.getElementById(t.toString()));document.getElementById("sim-wrapper").insertBefore(n,document.getElementById("circle-wrapper"))}}))}))},m=function(e){document.getElementById("0").getBoundingClientRect().top,parseInt(getComputedStyle(document.getElementById("0")).width),document.getElementById("sim-wrapper").offsetWidth,document.getElementById("sim-wrapper").offsetHeight;for(var t=0;t<e;t++)for(var n=0;n<e;n++)if(t!==n){var a,i,s,r;a=document.getElementById(t.toString()).getBoundingClientRect().left+window.pageXOffset,s=document.getElementById(t.toString()).getBoundingClientRect().top+window.pageYOffset,i=document.getElementById(n.toString()).getBoundingClientRect().left+window.pageXOffset,r=document.getElementById(n.toString()).getBoundingClientRect().top+window.pageYOffset,document.styleSheets[0].insertRule("@keyframes id".concat(t,"to").concat(n," { from{ left:").concat(a,"px; top:").concat(s,"px   } to{ left:").concat(i,"px; top:").concat(r,"px } }")),document.styleSheets[0].insertRule(".msg".concat(t,"to").concat(n," { left:").concat(a,"px; top:").concat(s,"px }"))}},u=function t(n,a,i){console.log("executing "+a);for(var o=a-1;o>=0;--o)if(!1===n[o].done)return console.log("out of order, waiting for correct thing to execute"),void setTimeout((function(){return t(n,a)}),500);if(a!==n.length){var l=n[a];if("recv"===l.dir&&l.msg.includes("original")){console.log("finished instr "+l.instrId),l.done=!0,e.setApiResponse(JSON.parse(JSON.stringify(n)));var c=e.sentInstructions,d=c[s],m=d.findIndex((function(e){return e.instrId===l.instrId}));m>=0&&(d[m].done=!0);for(var u=!0,p=0;p<d.length;p++)d[p].done||(u=!1);return e.setSentInstructions(JSON.parse(JSON.stringify(c))),void(u&&r(s+1))}if("recv"===l.dir&&l.msg.includes("final")&&l.msg.includes("updateDataRange"))return console.log("finished instr "+l.instrId),l.done=!0,void e.setApiResponse(JSON.parse(JSON.stringify(n)));for(var f=a+1;n[f].instrId!==n[a].instrId;)f++;var g=n[f];if(g.nodeId===l.nodeId)return l.done=!0,e.setApiResponse(JSON.parse(JSON.stringify(n))),void t(n,f);if(l.msg.includes("initial payload")||"send"===l.dir&&l.msg.includes("middle")||"send"===l.dir&&l.msg.includes("final")){var h=1+g.networkLatency/100+g.additionalDelay/100,y=document.createElement("div"),v="instr_".concat(l.instrId,"_msg").concat(l.nodeId,"to").concat(g.nodeId,"_apiresindex_").concat(a);y.setAttribute("class","msg msg".concat(l.nodeId,"to").concat(g.nodeId)),y.setAttribute("id",v),document.getElementById("sim-wrapper").appendChild(y);var E=document.getElementById(v);return E.style.height=document.getElementById("0").offsetHeight+"px",E.style.width=document.getElementById("0").offsetWidth+"px",E.style.lineHeight=E.offsetHeight.toString()+"px",E.style.animation=i?"id".concat(l.nodeId,"to").concat(g.nodeId," ").concat(h,"s linear forwards paused"):"id".concat(l.nodeId,"to").concat(g.nodeId," ").concat(h,"s linear forwards"),E.addEventListener("animationend",(function(){console.log("Animation ".concat(v," ended")),E.remove(),t(n,f)})),E.addEventListener("click",(function(){return e.getPayloadInfo(a,v)})),l.done=!0,void e.setApiResponse(JSON.parse(JSON.stringify(n)))}return"recv"===l.dir&&l.msg.includes("middle")||"recv"===l.dir&&l.msg.includes("final")?(l.done=!0,e.setApiResponse(JSON.parse(JSON.stringify(n))),t(n,f)):void 0}console.log("does this ever happen?")};function p(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}}return i.a.createElement("div",{id:"sim-wrapper",className:"sim-wrapper"},i.a.createElement("div",{id:"circle-wrapper",className:"circle-wrapper"}))},m=(n(16),n(17),function(e){Object(a.useEffect)((function(){if(e.finishedExecuting&&e.finishedExecuting){var n=document.getElementById("run");n.innerHTML="reset",n.addEventListener("click",t)}}),[e.finishedExecuting]);var t=function t(){var n=document.getElementById("run");n.classList.remove("run-active"),n.classList.remove("run-running"),n.classList.remove("display-block"),n.classList.remove("display-none"),n.innerHTML="run",document.getElementById("textarea").value="",e.setFinishedExecuting(void 0),e.setRunButtonClasses(["run"]);document.getElementById("prompt").classList.toggle("display-none"),document.getElementById("textarea").classList.toggle("display-none"),document.getElementById("liveinfo").classList.toggle("display-none"),e.setInstrList([]),e.setApiResponseCopy([]),e.setMostRecentStepCompleted([]),n.removeEventListener("click",t)},n=function(t){var n=document.getElementById("run"),a=n.classList.contains("run-active"),i=n.classList.contains("run-running"),s=document.getElementById("play");if("run"===t&&a&&!i){document.getElementById("err-text")&&document.getElementById("err-text").remove();var r=!0,o=function(e){for(var t,n=(e=e.toLowerCase()).split("\n"),a=0,i=0,s=!0,r=!1,o=0;o<n.length;++o){var l=n[o].trim();l.length&&("normal"!==l?"in-order"!==l?t?s&&!t[i]?(t.push([{instrId:a++,text:l,done:!1}]),i=t.length-1):s&&t[i]?t[i].push({instrId:a++,text:l,done:!1}):r&&(t.push([{instrId:a++,text:l,done:!1}]),i=t.length):t=[[{instrId:a++,text:l,done:!1}]]:(s=!1,r=!0):(s=!0,r=!1,t&&(i=t.length)))}return t}(document.getElementById("textarea").value);o.forEach((function(e){e.forEach((function(e){var t=l(e.instrId,e.text,!1);if(t.failure){r=!1;var n=document.createElement("span");n.setAttribute("id","err-text"),n.setAttribute("style","color: orange");var a=document.createTextNode("failure: "+t.msg);n.appendChild(a),document.getElementById("console").insertBefore(n,document.getElementById("textarea"))}}))})),r&&(e.setInstructionsToSend(o),n.innerHTML="wait",n.classList.add("run-running"),document.getElementById("run").click())}else if("run"===t&&i){for(var c=document.getElementsByClassName("msg"),d=0;d<c.length;d++){document.getElementById(c.item(d).getAttribute("id")).style.animationPlayState="paused"}n.classList.remove("run-active"),n.classList.remove("run-running"),n.classList.add("display-none"),s.classList.remove("display-none")}else if("play"===t){for(var m=document.getElementsByClassName("msg"),u=0;u<m.length;u++){document.getElementById(m.item(u).getAttribute("id")).style.animationPlayState="running"}n.classList.remove("display-none"),n.classList.add("run-active"),n.classList.add("run-running"),s.classList.add("display-none")}};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"run",className:"run",onClick:function(){document.getElementById("run").classList.length>1&&n("run")}},"run"),i.a.createElement("div",{id:"play",className:"play display-none",onClick:function(){n("play")}},"play"),i.a.createElement("div",{id:"tutorial",className:"tutorial",onClick:function(){return document.getElementById("tutorial").classList.add("display-none"),document.getElementById("menu-btn").click(),void setTimeout((function(){document.getElementById("tutorial-li").click()}),800)}},"first visit?"))}),u=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),s=n[0],r=n[1],l=Object(a.useState)([]),c=Object(o.a)(l,2),d=c[0],u=c[1],p=Object(a.useState)(new Map),f=Object(o.a)(p,2),g=f[0],h=f[1],y=Object(a.useState)([]),v=Object(o.a)(y,2),E=v[0],w=v[1];Object(a.useEffect)((function(){if(e.apiResponse){0===d.length&&x(),u(e.apiResponse),console.log("console received new api progression"),console.log(e.apiResponse);for(var t=document.getElementsByClassName("msg"),n=0;n<t.length;n++){var a=t.item(n),i=a.id.split("_");!a.innerHTML&&g.get(parseInt(i[1]))&&(a.innerHTML=g.get(parseInt(i[1])))}}}),[e.apiResponse]),Object(a.useEffect)((function(){void 0!==e.ControlsProps.finishedExecuting&&!1===e.ControlsProps.finishedExecuting&&(b(),I())}),[e.ControlsProps.finishedExecuting]),Object(a.useEffect)((function(){e.sentInstructions&&(console.log("updated instr:"),console.log(e.sentInstructions),I())}),[e.sentInstructions]),Object(a.useEffect)((function(){0===s.length?(h(void 0),w([])):0===E.length&&s.forEach((function(e){return E[e.instrId]=!1}))}),[s]);var b=function(){document.getElementById("prompt").classList.toggle("display-none"),document.getElementById("textarea").classList.toggle("display-none"),document.getElementById("liveinfo").classList.toggle("display-none")},I=function(){var t=[];e.sentInstructions.forEach((function(e){e.forEach((function(e){t.push(e)}))})),r(t)},k=function(e,t){var n=void 0,a=void 0;if(g?n=g.get(e.instrId):a=new Map,void 0===n){for(var i,r=[],o=0;o<s.length;o++){for(var l=s[o],c=l.text.split(" "),d=0,m=!1;!m;)"read"===c[d]||"r"===c[d]?(i="r",m=!0):"update"===c[d]||"u"===c[d]?(i="u",m=!0):"insert"===c[d]||"i"===c[d]?(i="i",m=!0):"delete"!==c[d]&&"d"!==c[d]||(i="d",m=!0),d++;if("item"!==c[d]&&"i"!==c[d]||d++,"i"!==i){i=i.concat(c[d]);for(var u=r.length-1;u>=0;u--){var p=r[u].label;p[0]===i[0]&&p[1]===i[1]&&(i=p.includes("_")?i.concat("_"+(parseInt(p[p.length-1])+1).toString()):i.concat("_2"))}}else for(var f=r.length-1;f>=0;f--){var y=r[f].label;y[0]===i[0]&&(i=y.includes("_")?i.concat("_"+(parseInt(y[y.length-1])+1).toString()):i.concat("_2"))}r.push({instrId:l.instrId,label:i})}return r.forEach((function(e){a.set(e.instrId,e.label)})),"run"!==document.getElementById("run").innerHTML&&h(a),i=a.get(e.instrId),!1===t?i:i+": "}return!1===t?n:n+": "},N=function(e){return e.done?"gray":e.msg.includes("final")?"blue":e.msg.includes("original")?"yellow":"sky"},x=function(){for(var e=document.getElementById("instrlist").offsetWidth,t=document.getElementsByClassName("listlabel"),n=0,a=0;a<t.length;a++){var i=t.item(a).offsetWidth;i>n&&(n=i)}var s=document.getElementsByClassName("listmsg");t=document.getElementsByClassName("listlabel");for(var r=0;r<s.length;r++){var o=s.item(r),l=t.item(r);o.style.width=e-n-1+"px",l.style.lineHeight=o.offsetHeight+"px"}},S=function(e,t){var n=e[t].done?"gray":"sky";return 0===t&&(n=n.concat(" first")),t===e.length-1&&(n=n.concat(" last")),n};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"console",className:"console"},i.a.createElement(m,Object.assign({},e.ControlsProps,{setInstrList:r,setApiResponseCopy:u})),i.a.createElement("div",{id:"prompt",className:"before-textarea blink"},">>>"),i.a.createElement("textarea",{id:"textarea",onClick:function(){return document.getElementById("prompt").classList.remove("blink")},onChange:e.handleTextAreaInput}),i.a.createElement("div",{id:"liveinfo",className:"liveinfo display-none"},i.a.createElement("h3",{className:"liveinfo-h3 top-margin-20"},"executing instructions:"),i.a.createElement("ul",{className:"instrlist"},s.map((function(e,t){return i.a.createElement("li",{id:"instr"+e.instrId.toString(),key:t,className:S(s,t)},e.done?i.a.createElement("s",null,"instr "+k(e)):"instr "+k(e),e.text,e.done&&!E[e.instrId]?i.a.createElement("div",{className:"view-response",onClick:function(){return function(e){var t=[];E.forEach((function(n,a){t[a]=a===e||n})),w(t)}(e.instrId)}},"view response"):"",E[e.instrId]?i.a.createElement("div",{className:"response-text"},i.a.createElement("span",{className:"blue"}," instr ",k(e,!1)," response: "),i.a.createElement("br",null),function(e){var t=e.res.itemId?"itemId: ".concat(e.res.itemId,", "):"";return e.res.item&&(Object.keys(e.res.item).forEach((function(n){t=t.concat(n+": "+e.res.item[n]+", ")})),t=t.slice(0,-2)),i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{style:{color:"#f1ef43"}},"msg: "),i.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.res.msg}}),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#f1ef43"}},"item: "),i.a.createElement("span",{style:{color:"#f0d976"}},"{"),t,i.a.createElement("span",{style:{color:"#f0d976"}},"}"))}(e)):"")}))),i.a.createElement("h3",{className:"liveinfo-h3 top-margin"},"all system actions:"),i.a.createElement("ul",{className:"instrlist",id:"instrlist"},d.map((function(e,t){return i.a.createElement("li",{key:t,className:0===t?"first":t===d.length-1?"last":""},e.done?i.a.createElement("div",{className:"listlabel gray"},i.a.createElement("s",null,k(e))):i.a.createElement("div",{className:"listlabel sky"},k(e)),i.a.createElement("div",{className:"listmsg "+N(e)},e.msg))}))))),i.a.createElement("div",{id:"end"}))},p=n(2),f=n(3),g=function e(){Object(p.a)(this,e),this.nodeId=void 0,this.start=void 0,this.end=void 0,this.full=void 0,this.highestItemId=void 0},h=function(){function e(){Object(p.a)(this,e),this.map=new Map,this.keysInOrder=[]}return Object(f.a)(e,[{key:"set",value:function(e,t){this.map.has(e)||(this.keysInOrder.push(e),this.keysInOrder.sort((function(e,t){return e-t}))),this.map.set(e,t)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"delete",value:function(e){for(var t=void 0,n=0;n<this.keysInOrder.length;n++)if(this.keysInOrder[n]===e){t=n;break}return void 0!==t&&this.keysInOrder.splice(t,1),this.map.delete(e)}}]),e}(),y=function(){function e(t,n){var a=this;Object(p.a)(this,e),this.id=0,this.connections=[],this.latency=100,this.nodeMap=new Map,this.dataRangeOrderedMap=new h,this.dataRange=[],this.dataSlice=new Map,this.clock=[],this.mostRecentWrite=void 0,this.eventStream=void 0,this.processPayload=function(e,t,n){if(e.hasOwnProperty("msg")&&"Hello!"===e.msg)return Promise.resolve("Hello from node "+a.id);if(e.pathIndex!==e.path.length-1&&0!==e.pathIndex)return"updateDataRange"!==e.op&&a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"recv",networkLatency:t,additionalDelay:n,msg:"middle node "+a.id+" received payload",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),"out"===e.dir?++e.pathIndex:--e.pathIndex,e.id=e.path[e.pathIndex],"updateDataRange"!==e.op&&a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"send",msg:"middle node "+a.id+" changed payload path, is forwarding",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),a.ping(e);if("r"===e.op&&e.pathIndex===e.path.length-1&&"out"===e.dir){a.syncAndIncrementClock(e.sourceClock),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"recv",networkLatency:t,additionalDelay:n,msg:"final node "+a.id+" received payload",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),a.clock[a.id]++,e.requestClock=e.sourceClock,e.sourceClock=JSON.parse(JSON.stringify(a.clock));for(var i="itemId "+e.itemId+" was not found in database",s=0;s<a.dataRange.length;s++)if(e.itemId>=a.dataRange[s].start&&e.itemId<=a.dataRange[s].end){i="successful";break}var r=a.dataSlice.get(e.itemId);return r=JSON.parse(JSON.stringify(r)),e.msg=i,e.item=r,e.dir="in",e.id=e.path[--e.pathIndex],a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"send",msg:"final node "+a.id+" sending read response",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),a.ping(e)}if("u"===e.op&&e.pathIndex===e.path.length-1&&"out"===e.dir){a.syncAndIncrementClock(e.sourceClock),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"recv",networkLatency:t,additionalDelay:n,msg:"final node "+a.id+" received payload",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)});for(var o="itemId "+e.itemId+" was not found in database",l=0;l<a.dataRange.length;l++)if(e.itemId>=a.dataRange[l].start&&e.itemId<=a.dataRange[l].end){o="successful";break}var d=a.dataSlice.get(e.itemId),m=a.sourceHasUpdatedVectorClock(e);if(d&&(m||e.item.deleted)){for(var u=e.item,p=0,f=Object.keys(u);p<f.length;p++){var g=f[p];if("deleted"===g&&!0===u[g]){d={deleted:!0};break}d[g]=u[g]}a.dataSlice.set(e.itemId,d)}return!1===m&&!1===!!e.item.deleted&&(o="this write has already been overwritten. Returning what is currently in the database"),m&&(a.mostRecentWrite={clock:JSON.parse(JSON.stringify(e.sourceClock)),itemId:e.itemId,item:e.item}),d=JSON.parse(JSON.stringify(d)),e.msg=o,e.item=d,e.dir="in",e.id=e.path[--e.pathIndex],a.clock[a.id]++,e.requestClock=e.sourceClock,e.sourceClock=JSON.parse(JSON.stringify(a.clock)),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"send",msg:"final node "+a.id+" sending update response",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),a.ping(e)}if("i"===e.op&&e.pathIndex===e.path.length-1&&"out"===e.dir){a.syncAndIncrementClock(e.sourceClock),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"recv",networkLatency:t,additionalDelay:n,msg:"final node "+a.id+" received payload",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)});var h="successful",y={},v=void 0;if(e.hasOwnProperty("newRange"))a.dataRange.push(e.newRange),a.dataRangeOrderedMap.set(e.newRange.start,e.newRange),e.itemId=e.newRange.start,a.dataSlice.set(e.itemId,e.item),y=a.dataSlice.get(e.itemId),h="new range "+JSON.stringify(e.newRange,null,"</br>")+" added",v=e.newRange;else{var E=0;a.dataSlice.forEach((function(e,t){t>E&&(E=t)})),e.itemId=E+1,a.dataSlice.set(e.itemId,e.item),y=a.dataSlice.get(e.itemId),a.dataRange.forEach((function(t){e.itemId===t.end&&(t.full=!0,h="range that starts at "+t.start+" is now full",v=t)}))}if(v){var w,b=a.shortestPath(0,!0);b instanceof Map&&(w=b),w.forEach((function(t,n){if(n!==a.id&&n!==e.path[0]){a.clock[a.id]++;var i=JSON.parse(JSON.stringify(a.clock)),s=t.path[0]===a.id?1:0,r={id:t.path[s],path:t.path,pathIndex:s,op:"updateDataRange",newRange:v,dir:"out",sourceClock:i,instrId:n+99};a.ping(r)}}))}return y=JSON.parse(JSON.stringify(y)),e.newRange=v,e.msg=h,e.item=y,e.dir="in",e.id=e.path[--e.pathIndex],a.clock[a.id]++,e.requestClock=e.sourceClock,e.sourceClock=JSON.parse(JSON.stringify(a.clock)),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"send",networkLatency:t,additionalDelay:n,msg:"final node "+a.id+" sending insert response",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),a.ping(e)}return"updateDataRange"===e.op&&e.pathIndex===e.path.length-1&&"out"===e.dir?(a.syncAndIncrementClock(e.sourceClock),a.dataRangeOrderedMap.set(e.newRange.start,e.newRange),Promise.resolve({msg:"updateDataRange on node id "+a.id+" done"})):e.pathIndex<=0&&e.newRange?(a.syncAndIncrementClock(e.sourceClock),a.dataRangeOrderedMap.set(e.newRange.start,e.newRange),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"recv",networkLatency:t,additionalDelay:n,msg:"original node "+a.id+" received response",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),Promise.resolve(e)):e.pathIndex<=0?(a.syncAndIncrementClock(e.sourceClock),a.eventStream.next({instrId:e.instrId,nodeId:a.id,dir:"recv",networkLatency:t,additionalDelay:n,msg:"original node "+a.id+" received response",payload:JSON.parse(JSON.stringify(e)),done:!1,nodeInfoString:c(a)}),Promise.resolve(e)):Promise.resolve("unknown")},this.id=t,n&&(this.eventStream=n)}return Object(f.a)(e,[{key:"ping",value:function(e,t){if(this.id<0)return Promise.resolve("node: I am an invalid node!");if(1===e.path.length&&e.path[0]===this.id)return e.pathIndex=0,this.processPayload(e,0,0);var n=this.nodeMap.get(e.id);return n?(t||(t=0),this.connections.includes(e.id)?n.respond(e,t):Promise.resolve("node: this node is not connected to id "+e.id)):Promise.resolve("invalid node id requested")}},{key:"respond",value:function(e,t){var n=this;return new Promise((function(e){var a=n.delay();setTimeout((function(){e({networkLatency:a,additionalDelay:t})}),t?a+t:a)})).then((function(t){return n.processPayload(e,t.networkLatency,t.additionalDelay)}))}},{key:"findAllNodes",value:function(e,t){this.connections.forEach((function(n){var a=t.getNode(n);a.id>=0&&!e.nodeMap.has(a.id)&&(e.nodeMap.set(a.id,a),a.dataRange.forEach((function(t){e.dataRangeOrderedMap.set(t.start,t)})),e.clock.push(0),a.findAllNodes(e,t))}))}},{key:"read",value:function(e,t,n){if(this.clock[this.id]++,"number"===typeof e){for(var a=-1,i=this.dataRangeOrderedMap.keysInOrder.length-1;i>=0;i--){var s=this.dataRangeOrderedMap.keysInOrder[i];if(s<=e){a=void 0===this.dataRangeOrderedMap.get(s)?void 0:this.dataRangeOrderedMap.get(s).nodeId;break}}if(void 0===a)return Promise.resolve({msg:"requested id does not exist in db"});var r,o=this.shortestPath(a,!1);o instanceof Map||(r=o);var l=r[0]===this.id?1:0,d={id:r[l],path:r,pathIndex:l,op:"r",itemId:e,dir:"out",sourceClock:JSON.parse(JSON.stringify(this.clock)),instrId:n};return this.eventStream.next({instrId:d.instrId,nodeId:this.id,dir:"send",msg:"node "+this.id+" emitting initial payload for read op",payload:JSON.parse(JSON.stringify(d)),done:!1,nodeInfoString:c(this)}),this.ping(d,t)}return Promise.resolve({result:"unknown"})}},{key:"update",value:function(e,t,n,a){this.clock[this.id]++;var i=t.deleted?"delete":"update";if("number"===typeof e){for(var s=-1,r=this.dataRangeOrderedMap.keysInOrder.length-1;r>=0;r--){var o=this.dataRangeOrderedMap.keysInOrder[r];if(o<=e){s=void 0===this.dataRangeOrderedMap.get(o)?void 0:this.dataRangeOrderedMap.get(o).nodeId;break}}if(void 0===s)return Promise.resolve({msg:"requested id does not exist in db"});var l,d=this.shortestPath(s,!1);d instanceof Map||(l=d);var m=l[0]===this.id?1:0,u={id:l[m],path:l,pathIndex:m,op:"u",itemId:e,item:t,dir:"out",sourceClock:JSON.parse(JSON.stringify(this.clock)),instrId:a};return this.eventStream.next({instrId:u.instrId,nodeId:this.id,dir:"send",msg:"node "+this.id+" emitting initial payload for "+i+" op",payload:JSON.parse(JSON.stringify(u)),done:!1,nodeInfoString:c(this)}),this.ping(u,n)}return Promise.resolve({result:"unknown"})}},{key:"insert",value:function(e,t,n){this.clock[this.id]++;var a,i=-1,s=this.dataRangeOrderedMap.keysInOrder[this.dataRangeOrderedMap.keysInOrder.length-1],r=this.dataRangeOrderedMap.get(s);if(r&&!r.full){i=r.nodeId;var o,l=this.shortestPath(i,!1);l instanceof Map||(o=l);var d=o[0]===this.id?1:0,m={id:o[d],path:o,pathIndex:d,op:"i",item:e,dir:"out",sourceClock:JSON.parse(JSON.stringify(this.clock)),instrId:n};return this.eventStream.next({instrId:m.instrId,nodeId:this.id,dir:"send",msg:"node "+this.id+" emitting initial payload for insert op",payload:JSON.parse(JSON.stringify(m)),done:!1,nodeInfoString:c(this)}),this.ping(m,t)}this.dataRangeOrderedMap.map.forEach((function(e,t){a?a.find((function(t){return t.nodeId===e.nodeId}))?a.find((function(t){return t.nodeId===e.nodeId})).numDataRange++:a.push({numDataRange:1,nodeId:e.nodeId}):a=[{numDataRange:1,nodeId:e.nodeId}]})),a.sort((function(e,t){return e.numDataRange-t.numDataRange}));for(var u=0,p=0;p<a.length&&!(a[p].numDataRange>a[0].numDataRange);p++)u++;var f=a.splice(0,u);f.sort((function(e,t){return e.nodeId-t.nodeId})),i=f[0].nodeId;var h=new g;h.start=r.end+1,h.end=h.start+this.dataRange[0].end-this.dataRange[0].start,h.full=!1,h.nodeId=i;var y,v=this.shortestPath(i,!1);v instanceof Map||(y=v);var E=y[0]===this.id?1:0,w={id:y[E],path:y,pathIndex:E,op:"i",item:e,newRange:h,dir:"out",sourceClock:JSON.parse(JSON.stringify(this.clock)),instrId:n};return this.eventStream.next({instrId:w.instrId,nodeId:this.id,dir:"send",msg:"node "+this.id+" emitting initial payload for insert op",payload:JSON.parse(JSON.stringify(w)),done:!1,nodeInfoString:c(this)}),this.ping(w,t)}},{key:"delete",value:function(e,t,n){return this.update(e,{deleted:!0},t,n)}},{key:"recover",value:function(){}},{key:"retry",value:function(){}},{key:"shortestPath",value:function(t,n){var a=this,i=new Map;this.nodeMap.forEach((function(e){e.id===a.id?i.set(e.id,{distance:0,visited:!0,path:[e.id]}):i.set(e.id,{distance:void 0,visited:!1,path:[]})}));for(var s=[this.id],r=function(){var r=s.splice(0,1)[0],o=i.get(r),l={distance:-1,visited:!1,path:[]};o&&(l=o);var c=a.nodeMap.get(r),d=new e(-1);if(c&&(d=c),d.connections.forEach((function(e){var t=i.get(e);t&&!t.visited&&(t.distance=l.distance+1,t.path=l.path.concat([e]),s.push(e))})),l.visited=!0,!n&&r===t)return"break"};s.length>0;){if("break"===r())break}if(n)return i;var o=i.get(t),l=[];return o&&(l=o.path),l}},{key:"delay",value:function(){return Math.round(Math.random()*this.latency)}},{key:"syncAndIncrementClock",value:function(e){var t=this;e.forEach((function(e,n){e>t.clock[n]&&(t.clock[n]=e)})),this.clock[this.id]++}},{key:"sourceHasUpdatedVectorClock",value:function(e){var t=!1;if(void 0===this.mostRecentWrite)return!0;for(var n=0;n<this.mostRecentWrite.clock.length;n++)if(this.mostRecentWrite.clock[n]<e.sourceClock[n]){t=!0;break}return t}},{key:"emitEvent",value:function(e){this.eventStream&&this.eventStream.next(e)}}]),e}(),v=n(20),E=function(){function e(t,n,a){var i=this;Object(p.a)(this,e),this.nodeMap=new Map,this.numNodes=void 0,this.eventStream=void 0;var s=n||5;this.eventStream=a||new v.a,this.numNodes=t;for(var r=function(e){var t=new y(e,i.eventStream);if(e>0){var n=[];n.push(Math.round(Math.random()*(i.nodeMap.size-1))),n.forEach((function(e){t.connections.push(e);var n=i.nodeMap.get(e);n.connections.indexOf(t.id)<0&&n.connections.push(t.id)}))}var a=e*s,r=new g;r.nodeId=t.id,r.start=a,r.end=a+s-1,r.full=!0,t.dataRange.push(r);for(var o=0;o<s;o++)t.dataSlice.set(a+o,{fruit:i.getRandomFruit(a+o)});i.nodeMap.set(t.id,t)},o=0;o<t;o++)r(o);this.nodeMap.forEach((function(e){e.findAllNodes(e,i)}))}return Object(f.a)(e,[{key:"getNode",value:function(e){var t=this.nodeMap.get(e);return t||new y(-1)}},{key:"getRandomNode",value:function(){var e=this.nodeMap.get(Math.round(Math.random()*(this.nodeMap.size-1)));return void 0===e&&console.log("network: getRandomNode failed"),e||new y(-1)}},{key:"getRandomFruit",value:function(e){var t=Math.random();return t<.1?"apple":t<.2?"banana":t<.3?"cherry":t<.4?"strawberry":t<.5?"pineapple":t<.6?"tomato":t<.7?"tomahhto":t<.8?"passionfruit":t<.9?"grapefruit":t<.95?"dragonfruit":"a super expensive Japanese melon"}}]),e}(),w=function(e){var t=Object(a.useState)(new v.a),n=Object(o.a)(t,1)[0],s=Object(a.useState)([]),r=Object(o.a)(s,2),c=r[0],d=r[1],m=Object(a.useState)(!1),u=Object(o.a)(m,2),p=u[0],f=u[1];Object(a.useEffect)((function(){e.setNetwork(g(10))}),[]);var g=function(e){return new E(e,3,n)};Object(a.useEffect)((function(){if(e.sentInstructions&&!1!==e.simFinishedExecuting){var t=n.subscribe((function(e){c.push(e)}));h(e.sentInstructions,0,t)}}),[e.sentInstructions]),Object(a.useEffect)((function(){p&&(e.setApiResponse(JSON.parse(JSON.stringify(c))),d([]),f(!1))}),[p]);var h=function t(n,a,i){if(a===n.length)return console.log("completed all commands!"),console.log(e.sentInstructions),i.unsubscribe(),f(!0),{done:!0};for(var s=n[a],r=s.length,o=0,c=function(c){var d=s[c],m=l(d.instrId,d.text,!0,e.network);m instanceof Promise&&m.then((function(e){if(o++,d.res=e,o===r)return t(n,++a,i)}))},d=0;d<s.length;d++)c(d)};return i.a.createElement(i.a.Fragment,null)},b=(n(18),n(6)),I=n.n(b),k=function(e){var t=Object(a.useState)(["menu","overlay"]),n=Object(o.a)(t,2),s=n[0],r=n[1],l=Object(a.useState)("initial-contents"),c=Object(o.a)(l,2),d=c[0],m=c[1],u=i.a.createElement("ul",{id:"initial-contents",className:"initial-contents"},i.a.createElement("li",{id:"tutorial-li",onClick:function(){m("tutorial-contents"),r(["menu menu-full","overlay overlay-active"]),document.getElementById("tutorial").classList.length<2&&document.getElementById("tutorial").classList.add("display-none")}},i.a.createElement("h2",null,"welcome")),i.a.createElement("li",{onClick:function(){m("example-contents"),r(["menu menu-full","overlay overlay-active"])}},i.a.createElement("h2",null,"example commands")),i.a.createElement("li",{onClick:function(){m("about-contents"),r(["menu menu-full","overlay overlay-active"])}},i.a.createElement("h2",null,"motivation"))),p=function(e){return e.webkitAnimationClassName.length>0&&(document.styleSheets[0].insertRule(".".concat(e.webkitAnimationClassName," {\n                    -webkit-animation-name: ").concat(e.webkitAnimation.name,";\n                    -webkit-animation-duration: ").concat(e.webkitAnimation.duration,";\n                    -webkit-animation-timing-function: ").concat(e.webkitAnimation.func,";\n                    -webkit-animation-delay: ").concat(e.webkitAnimation.delay,";\n                    -webkit-animation-iteration-count: ").concat(e.webkitAnimation.repeat,";\n                }")),setTimeout((function(){document.getElementById(e.id).classList.add(e.webkitAnimationClassName)}),100)),i.a.createElement("div",{id:e.id,className:e.classes?"msg-showcase "+e.classes:"msg-showcase ",style:{backgroundColor:e.bgc}},e.label)},f=i.a.createElement("span",{className:"back-to-menu",onClick:function(){m("initial-contents"),r(["menu menu-active","overlay overlay-active"]),document.getElementById("root").style.removeProperty("height"),document.getElementById("app").style.removeProperty("height")}},"back to menu"),g=i.a.createElement(i.a.Fragment,null,f,i.a.createElement("div",{id:"tutorial-wrapper",className:"menu-content-wrapper"},i.a.createElement("h1",{id:"tutorial-contents-hero",className:"contents-hero tutorial-first-fade"},"Welcome."),i.a.createElement("p",{id:"tutorial-second-fade",className:"tutorial-second-fade"},"You might have heard about Lamport clocks, but what the heck are they actually used for? Keep reading to find out."),window.innerWidth>1195?i.a.createElement("p",{className:"tutorial-second-fade"},"*This app was designed on mobile first. Feel free to visit on your phone as well - this page is especially suited for vertical scrolling :)"):"",i.a.createElement("ul",{id:"tutorial-third-fade",className:"instrlist menulist tutorial-third-fade"},i.a.createElement("li",{className:"first"},i.a.createElement("p",null,"Node 1 is a node in our database."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{id:"s0n1",className:"dot-showcase",style:{float:"none"}},"1"))),i.a.createElement("li",null,i.a.createElement("p",null,"Let's send two write requests to the node, one after the other: w1 and w2."),i.a.createElement("div",{className:"showcase"},p({id:"s1w2",label:"w2",bgc:"rgba(24, 205, 250, 0.904)",animation:"s1 10s linear 8s infinite",webkitAnimation:{name:"wk-s1",duration:"10s",func:"linear",delay:"8s",repeat:"infinite"},webkitAnimationClassName:"wk-s1-class"}),p({id:"s1w1",label:"w1",bgc:"rgba(250, 235, 24, 0.904)",animation:"s1 10s linear 8s infinite",webkitAnimation:{name:"wk-s1",duration:"10s",func:"linear",delay:"8s",repeat:"infinite"},webkitAnimationClassName:"wk-s1-class"}),i.a.createElement("div",{id:"s1n1",className:"dot-showcase"},"1"))),i.a.createElement("li",null,i.a.createElement("p",null,"w2 travels faster and completes first."),i.a.createElement("div",{className:"showcase"},p({id:"s2w2",label:"w2",bgc:"rgba(24, 205, 250, 0.904)",animation:"s2w2 10s linear 14s infinite",webkitAnimation:{name:"wk-s2w2",duration:"10s",func:"linear",delay:"14s",repeat:"infinite"},webkitAnimationClassName:"wk-s2w2-class"}),p({id:"s2w1",label:"w1",bgc:"rgba(250, 235, 24, 0.904)",animation:"s2w1 10s linear 14s infinite",webkitAnimation:{name:"wk-s2w1",duration:"10s",func:"linear",delay:"14s",repeat:"infinite"},webkitAnimationClassName:"wk-s2w1-class"}),i.a.createElement("div",{id:"s2n1",className:"dot-showcase"},"1"))),i.a.createElement("li",null,i.a.createElement("p",null,"What happens when w1 arrives at the node after w2 already completed?"),i.a.createElement("p",null,"The database will write w1, and end up with w1's value."),i.a.createElement("div",{className:"showcase showcase-3"},p({id:"s3w1",label:"w1",bgc:"rgba(250, 235, 24, 0.904)",animation:"s3w1 10s linear 18s infinite",webkitAnimation:{name:"wk-s3w1",duration:"10s",func:"linear",delay:"18s",repeat:"infinite"},webkitAnimationClassName:"wk-s3w1-class",classes:"msg-showcase-3 s3n1"}),p({id:"s3w2",label:"w2",bgc:"rgba(24, 205, 250, 0.904)",animation:"s3w2 10s linear 18s infinite",webkitAnimation:{name:"wk-s3w2",duration:"10s",func:"linear",delay:"18s",repeat:"infinite"},webkitAnimationClassName:"wk-s3w2-class",classes:"msg-showcase-3 s3n1"}),i.a.createElement("div",{id:"s3n3",className:"dot-showcase",style:{backgroundColor:"rgba(250, 24, 24, 0.904)",color:"#fff"}},"w1"),(document.styleSheets[0].insertRule(".wk-s3n2-class {\n                -webkit-animation-name: wk-s3n2;\n                -webkit-animation-duration: 10s;\n                -webkit-animation-timing-function: linear;\n                -webkit-animation-delay: 18s;\n                -webkit-animation-iteration-count: infinite;\n            }"),document.styleSheets[0].insertRule(".wk-s3n1-class {\n                -webkit-animation-name: wk-s3n1;\n                -webkit-animation-duration: 10s;\n                -webkit-animation-timing-function: linear;\n                -webkit-animation-delay: 18s;\n                -webkit-animation-iteration-count: infinite;\n            }"),setTimeout((function(){document.getElementById("s3n2").classList.add("wk-s3n2-class"),document.getElementById("s3n1").classList.add("wk-s3n1-class")}),100),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"s3n2",className:"dot-showcase s3n2",style:{backgroundColor:"rgba(24, 205, 250, 0.904)"}},"w2"),i.a.createElement("div",{id:"s3n1",className:"dot-showcase s3n1"},"1")))),i.a.createElement("p",{style:{marginTop:"15px"}},"Seems backwards right? w2 was sent most recently so the database should end up with w2's value.")),i.a.createElement("li",null,i.a.createElement("p",null,"To solve this problem, each request is sent with a ",i.a.createElement("strong",null,"clock"),". It's just a number that counts up for each request sent and received."),i.a.createElement("p",null,"The clocks tell us that we sent w1 at time 5. We sent w2 right after, at time 6."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},p({id:"s4w1",label:"w1",bgc:"rgba(250, 235, 24, 0.904)",animation:"",webkitAnimation:{name:"",duration:"",func:"",delay:"",repeat:""},webkitAnimationClassName:"",classes:"margin-auto display-block"}),i.a.createElement("div",{className:"tut-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 5 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]"))),i.a.createElement("div",{className:"half float-right"},p({id:"s4w2",label:"w2",bgc:"rgba(24, 205, 250, 0.904)",animation:"",webkitAnimation:{name:"",duration:"",func:"",delay:"",repeat:""},webkitAnimationClassName:"",classes:"margin-auto display-block"}),i.a.createElement("div",{className:"tut-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 6 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]"))))),i.a.createElement("li",null,i.a.createElement("p",null,"The node receives w2 first, and it remembers that w2 was sent at time 6."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block"}},"w2"),i.a.createElement("div",{className:"tut-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 6 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]")))),i.a.createElement("li",null,i.a.createElement("p",null,"The node then receives w1. w1's clock is \"behind\" w2's clock so the node doesn't execute w1."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},p({id:"s4w1",label:"w1",bgc:"rgba(250, 235, 24, 0.904)",animation:"",webkitAnimation:{name:"",duration:"",func:"",delay:"",repeat:""},webkitAnimationClassName:"",classes:"margin-auto display-block"}),i.a.createElement("div",{className:"tut-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 5 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]"))),i.a.createElement("div",{className:"half float-right"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block"}},"w2"),i.a.createElement("div",{className:"tut-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 6 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]")))),i.a.createElement("p",{style:{marginTop:"15px"}},"When w1 arrives, it has already been overwritten by the more recent operation w2."),i.a.createElement("p",null,i.a.createElement("strong",null,"This is how logical clocks are used in distributed systems."))),i.a.createElement("li",{className:"last"},i.a.createElement("p",null,"To see logical clocks in action, enter these commands into the console on the main page: "),i.a.createElement("div",{className:"tut-clock-label",style:{paddingLeft:"10px",paddingRight:"10px",textAlign:"left"}},i.a.createElement("span",{style:{color:"#f1f5fd",display:"block",marginBottom:"5px"}},'node 0 update item 15 {"fruit": "apple"} delay 5'),i.a.createElement("span",{style:{color:"#f1f5fd",display:"block"}},'node 0 update item 15 {"fruit": "kiwi", "secondEdit":"true"}')),i.a.createElement("p",{style:{marginTop:"15px"}},"To learn what else you can do with this database simulation,",i.a.createElement("span",{className:"open-examples",onClick:function(){document.getElementById("root").style.removeProperty("height"),document.getElementById("app").style.removeProperty("height"),m("example-contents");try{document.getElementById("menu-close").scrollIntoView({behavior:"smooth"})}catch(e){document.getElementById("menu-close").scrollIntoView()}setTimeout((function(){document.getElementById("root").style.height=document.getElementById("menu").offsetHeight+"px",document.getElementById("app").style.height=document.getElementById("menu").offsetHeight+"px"}),500)}},window.innerWidth>1195?" click here.":" tap here.")))))),h=i.a.createElement(i.a.Fragment,null,f,i.a.createElement("div",{id:"example-wrapper",className:"menu-content-wrapper"},i.a.createElement("h1",{id:"example-contents-hero",className:"contents-hero"},"Example Commands"),i.a.createElement("ul",{id:"example-list",className:"instrlist menulist extra-p-margin"},i.a.createElement("li",{className:"first"},i.a.createElement("p",null,"All commands can be abbreviated."),i.a.createElement("p",null,"Read"),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,"node 0 read item 15"))),i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,"n 0 r 15"))))),i.a.createElement("li",null,i.a.createElement("p",null,"Insert"),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,'node 0 insert item {"anyField":"anyString", "anyNumber":10 }'))),i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,'n 0 i {"anyField":"anyString", "anyNumber":10 }'))))),i.a.createElement("li",null,i.a.createElement("p",null,"Update"),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,'node 0 update item 15 {"anyField":"anyString", "anyNumber":10 }'))),i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,'n 0 u 15 {"anyField":"anyString", "anyNumber":10 }'))))),i.a.createElement("li",null,i.a.createElement("p",null,"Delete"),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,"node 0 delete item 15"))),i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,"n 0 d 15"))))),i.a.createElement("li",null,i.a.createElement("p",null,"Execute multiple commands by entering them on different lines in the console."),i.a.createElement("p",null,i.a.createElement("strong",null,"Normal"),", the default, sends at the same time."),i.a.createElement("p",null,i.a.createElement("strong",null,"In-order")," guarantees that the first command finishes before the second."),i.a.createElement("p",null,i.a.createElement("strong",null,"Delay")," delays the command by a number of seconds."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,'node 0 update item 15 {"secondEdit":false} delay 5'))),i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",null,'node 0 update item 15 {"secondEdit":true}')))),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("div",null,"in-order"),i.a.createElement("div",null,"node 0 read item 15 delay 5"),i.a.createElement("div",null,"node 0 read item 15"))),i.a.createElement("div",{className:"half"},i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("div",null,"normal"),i.a.createElement("div",null,"node 0 read item 15"),i.a.createElement("div",null,'node 0 update item 15 {"secondEdit":true}'))))),i.a.createElement("li",null,i.a.createElement("h3",{style:{margin:"0"}},"Workflow"),i.a.createElement("p",null,window.innerWidth>1195?"Click ":"Tap ","each node to display its data."),i.a.createElement("p",null,"Note the nodeId that will send the request, and the itemId that will be read or modified."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half ex-half"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block"}},"0"),i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43"}},"node 0 info"))),i.a.createElement("div",{className:"half ex-half"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block",backgroundColor:"rgba(24, 205, 250, 0.904)"}},"5"),i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43"}},"dataSlice: "),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f0d976"}},"{"),"itemId: 15, ...",i.a.createElement("span",{style:{color:"#f0d976"}},"}"),i.a.createElement("span",{style:{color:"#18cdfa"}},"]"))))),i.a.createElement("li",null,i.a.createElement("p",null,"Type your command in the console."),i.a.createElement("p",null,"Try ",window.innerWidth>1195?" clicking ":" tapping ","the node that will send the command. Notice how its clock changes during the command."),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half ex-half"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block"}},"0"),i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 5 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]"))),i.a.createElement("div",{className:"half ex-half"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block"}},"0"),i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 6 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]"))))),i.a.createElement("li",{className:"last"},i.a.createElement("p",null,"Hit the run button, and ",window.innerWidth>1195?" click ":" tap ","the blue message that pops up to see its contents. Then hit the play button."),i.a.createElement("p",null,"Pause the sim before and after the message hits the target node that contains data to be read or modified. How does the the target node's clock change?"),i.a.createElement("div",{className:"showcase",style:{textAlign:"center"}},i.a.createElement("div",{className:"half ex-half"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block",backgroundColor:"rgba(24, 205, 250, 0.904)"}},"5"),i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 0 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]"))),i.a.createElement("div",{className:"half ex-half"},i.a.createElement("div",{className:"dot-showcase",style:{float:"none",margin:"auto",display:"block",backgroundColor:"rgba(24, 205, 250, 0.904)"}},"5"),i.a.createElement("div",{className:"ex-clock-label"},i.a.createElement("span",{style:{color:"#f1ef43",marginLeft:"10px"}},"clock: "),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"#18cdfa"}},"["),i.a.createElement("span",{style:{color:"#f1f5fd"}}," 2 "),i.a.createElement("span",{style:{color:"#18cdfa",marginRight:"10px"}},"]")))))))),y=i.a.createElement(i.a.Fragment,null,f,i.a.createElement("div",{id:"about-wrapper",className:"menu-content-wrapper"},i.a.createElement("h1",{id:"about-contents-hero",className:"contents-hero"},"Motivation"),i.a.createElement("ul",{id:"about-list",className:"instrlist menulist extra-p-margin"},i.a.createElement("li",{className:"first",style:{paddingTop:"0"}},i.a.createElement("h3",{style:{margin:"0"}},"Hello, I'm Aleexsan Adal."),i.a.createElement("p",null,"I heard about Lamport clocks from this episode of ",i.a.createElement("span",null,i.a.createElement("a",{target:"_blank",href:"https://softwareengineeringdaily.com/2019/09/18/distributed-databases-with-aly-cabral/"},"Software Engineering Daily,"))," and did some googling on the concept."),i.a.createElement("p",null,"Most articles explained what the algorithm is (just increment for messages sent and received), but none had a clear explanation of ",i.a.createElement("strong",null,"why a distributed system needs to track logical time."))),i.a.createElement("li",null,i.a.createElement("p",null,i.a.createElement("strong",null,"The system needs clocks to re-order operations that arrive out of order. "),"You could send write 1 and then write 2, but they may arrive in the reverse order due to network delay."),i.a.createElement("p",null,"The clocks will show which op was sent first, so the database nodes must compare the arriving clock with the most recent write's clock to determine what to do."),i.a.createElement("p",null,"This is the example explained in the welcome section.")),i.a.createElement("li",null,i.a.createElement("p",null,"I'm still bewildered that this example or similar ones aren't included in every explanation of logical clocks.")),i.a.createElement("li",{className:"last"},i.a.createElement("p",null,"--- From a visual learner, supporting other visual learners. Those engineering textbooks sure aren't.")))));Object(a.useEffect)((function(){"menu menu-full"===s[0]?(document.getElementById("root").style.height=document.getElementById("menu").offsetHeight+"px",document.getElementById("app").style.height=document.getElementById("menu").offsetHeight+"px"):"menu"===s[0]&&("initial-contents"!==d&&m("initial-contents"),document.getElementById("root").style.removeProperty("height"),document.getElementById("app").style.removeProperty("height"))}),[s]),Object(a.useEffect)((function(){if("tutorial-contents"===d){var e=document.getElementById("s1w1").offsetWidth,t=document.getElementById("s1n1").getBoundingClientRect().left-document.getElementById("s1w1").getBoundingClientRect().left-e,n=document.getElementById("s1n1").getBoundingClientRect().left-document.getElementById("s1w2").getBoundingClientRect().left-e;document.styleSheets[0].insertRule("@keyframes s1 {\n                    0% { transform: translate(0, 0); }\n                    25% { transform: translate(".concat(t,"px, 0); }\n                    100% { transform: translate(").concat(t,"px, 0); }\n                }")),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s1 {\n                    0% { -webkit-transform: translate(0, 0); }\n                    25% { -webkit-transform: translate(".concat(t,"px, 0); }\n                    100% { -webkit-transform: translate(").concat(t,"px, 0); }\n                }")),document.styleSheets[0].insertRule("@keyframes s2w1 {\n                    0% { transform: translate(0, 0); }\n                    25% { transform: translate(".concat(t-e,"px, 0); }\n                    100% { transform: translate(").concat(t-e,"px, 0); }\n                }")),document.styleSheets[0].insertRule("@keyframes s2w2 {\n                    0% { transform: translate(0, 0); }\n                    17% { transform: translate(".concat(n,"px, 0); }\n                    100% { transform: translate(").concat(n,"px, 0); }\n                }")),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s2w1 {\n                    0% { -webkit-transform: translate(0, 0); }\n                    25% { -webkit-transform: translate(".concat(t-e,"px, 0); }\n                    100% { -webkit-transform: translate(").concat(t-e,"px, 0); }\n                }")),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s2w2 {\n                    0% { -webkit-transform: translate(0, 0); }\n                    17% { -webkit-transform: translate(".concat(n,"px, 0); }\n                    100% { -webkit-transform: translate(").concat(n,"px, 0); }\n                }")),document.styleSheets[0].insertRule("@keyframes s3w2 {\n                    0%  { transform: translate(".concat(2*e,"px, 0); opacity: 1; }\n                    30%  { transform: translate(").concat(2*e,"px, 0); opacity: 1; }\n                    40%  { transform: translate(").concat(3*e,"px, 0); opacity: 0; }\n                    100% { transform: translate(").concat(3*e,"px, 0); opacity: 0; }\n                }")),document.styleSheets[0].insertRule("@keyframes s3n1 {\n                    0%  { opacity: 1; }\n                    30%  { opacity: 1; }\n                    40%  { opacity: 0; }\n                    100% { opacity: 0; }\n                }"),document.styleSheets[0].insertRule("@keyframes s3w1 {\n                    0%  { transform: translate(".concat(2*e,"px, 0); opacity: 1; }\n                    50%  { transform: translate(").concat(2*e,"px, 0); opacity: 1; }\n                    60%  { opacity: 1; }\n                    70%  { transform: translate(").concat(4*e,"px, 0); opacity: 0; }\n                    100% { transform: translate(").concat(4*e,"px, 0); opacity: 0; }\n                }")),document.styleSheets[0].insertRule("@keyframes s3n2 {\n                    0%  { opacity: 1; }\n                    60%  { opacity: 1; }\n                    70%  { opacity: 0; }\n                    100% { opacity: 0; }\n                }"),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s3w2 {\n                    0%  { -webkit-transform: translate(".concat(2*e,"px, 0); opacity: 1; }\n                    30%  { -webkit-transform: translate(").concat(2*e,"px, 0); opacity: 1; }\n                    40%  { -webkit-transform: translate(").concat(3*e,"px, 0); opacity: 0; }\n                    100% { -webkit-transform: translate(").concat(3*e,"px, 0); opacity: 0; }\n                }")),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s3n1 {\n                    0%  { opacity: 1; }\n                    30%  { opacity: 1; }\n                    40%  { opacity: 0; }\n                    100% { opacity: 0; }\n                }"),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s3w1 {\n                    0%  { -webkit-transform: translate(".concat(2*e,"px, 0); opacity: 1; }\n                    50%  { -webkit-transform: translate(").concat(2*e,"px, 0); opacity: 1; }\n                    60%  { opacity: 1; }\n                    70%  { -webkit-transform: translate(").concat(4*e,"px, 0); opacity: 0; }\n                    100% { -webkit-transform: translate(").concat(4*e,"px, 0); opacity: 0; }\n                }")),document.styleSheets[0].insertRule("@-webkit-keyframes wk-s3n2 {\n                    0%  { opacity: 1; }\n                    60%  { opacity: 1; }\n                    70%  { opacity: 0; }\n                    100% { opacity: 0; }\n                }")}}),[d]);var v;return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",null,i.a.createElement("nav",{id:"nav"},i.a.createElement("div",{className:"nav-title"},"dist-sim"),i.a.createElement("img",{id:"menu-btn",className:"menu-btn",src:I.a,alt:"Menu icon",onClick:function(){document.getElementById("tutorial-wrapper")?r(["menu menu-full","overlay overlay-active"]):r(["menu menu-active","overlay overlay-active"])}}))),i.a.createElement("div",{id:"overlay",className:s[1],onClick:function(){return r(["menu","overlay"])}}),i.a.createElement("div",{id:"menu",className:s[0]},i.a.createElement("svg",{onClick:function(){return r(["menu","overlay"])},id:"menu-close",className:"menu-close",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z"})),"tutorial-contents"===(v=d)?g:"example-contents"===v?h:"about-contents"===v?y:u))},N=function(){var e=Object(a.useState)(["node-info"]),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(["run"]),l=Object(o.a)(r,2),m=l[0],p=l[1],f=Object(a.useState)("init"),g=Object(o.a)(f,2),h=g[0],y=g[1],v=Object(a.useState)(void 0),E=Object(o.a)(v,2),b=E[0],I=E[1],N=Object(a.useState)(void 0),x=Object(o.a)(N,2),S=x[0],O=x[1],R=Object(a.useState)(void 0),B=Object(o.a)(R,2),C=B[0],L=B[1],M=Object(a.useState)(void 0),J=Object(o.a)(M,2),A=J[0],j=J[1],P=Object(a.useState)(new Map),T=Object(o.a)(P,1)[0],H=Object(a.useState)([]),W=Object(o.a)(H,2),D=W[0],F=W[1],_=Object(a.useState)(!1),q=Object(o.a)(_,2),V=q[0],z=q[1];Object(a.useEffect)((function(){window.innerWidth>1195&&(document.documentElement.style.setProperty("--sim-wrapper-vertical-padding","70px"),document.documentElement.style.setProperty("--sim-wrapper-horizontal-padding","70px"),z(!0))}),[]),Object(a.useEffect)((function(){if(b){document.documentElement.style.setProperty("--prompt-width",document.getElementById("prompt").offsetWidth+"px"),document.getElementById("textarea").style.height=document.getElementById("console").offsetHeight-30-document.getElementById("run").offsetHeight+"px",document.addEventListener("click",(function(e){"circle-wrapper"!==e.target.id&&"sim-wrapper"!==e.target.id||X()})),document.getElementById("textarea").addEventListener("click",(function(e){window.innerWidth<=767&&G(),document.removeEventListener("click",Y),document.addEventListener("click",Y)}));for(var e=0;e<b.numNodes;e++)T.set(e,c(b.getNode(e)))}}),[b]),Object(a.useEffect)((function(){if(C){for(var e=D.length?D[0]:0;C[e]&&C[e].done;)T.set(C[e].nodeId,C[e].nodeInfoString),e++;D[0]=e>0?e-1:0}}),[C]);var Y=function e(t){var n=document.getElementById("run").contains(t.target)&&document.getElementById("run").classList.length>1;document.getElementById("textarea").contains(t.target)||n||(K(),document.removeEventListener("click",e))},U=function(e){document.getElementById("node-info-wrapper").innerHTML=e,1===document.getElementById("node-info").classList.length&&(s(["node-info node-info-active"]),setTimeout((function(){return document.getElementById("liveinfo").style.display="none"}),300))},X=function(){s(["node-info"]),document.getElementById("liveinfo").style.removeProperty("display"),setTimeout((function(){return document.getElementById("node-info").style.removeProperty("height")}),300)},K=function(){try{document.getElementById("nav").scrollIntoView({behavior:"smooth"})}catch(e){document.getElementById("nav").scrollIntoView()}},G=function(){try{document.getElementById("end").scrollIntoView({behavior:"smooth"})}catch(e){document.getElementById("end").scrollIntoView()}};return i.a.createElement("div",{id:"app",className:"app"},i.a.createElement(k,null),i.a.createElement(d,{net:b,getNodeInfo:function(e){return U(T.get(e))},getPayloadInfo:function(e,t){return U(function(e,t){console.log(e);var n=document.getElementById(t).innerHTML,a="";if("out"===e.dir)for(var i=0;i<e.path.length;i++)a=a.concat(e.path[i].toString()),i+1<e.path.length&&(a=a.concat(" => "));else for(var s=e.path.length-1;s>=0;s--)a=a.concat(e.path[s].toString()),s-1>=0&&(a=a.concat(" => "));var r="";"r"===e.op?r="read":"u"===e.op?r="update":"i"===e.op?r="insert":"d"===e.op&&(r="delete");var o="";e.itemId&&(o="<span style='color: #f1ef43'>itemId: </span>"+e.itemId+"</br>");var l="";e.item&&(l="<span style='color: #f1ef43'>item: </span>"+JSON.stringify(e.item,null,1)+"</br>");var c="";return e.msg&&(c="<span style='color: #f1ef43'>msg: </span>"+e.msg+"</br>"),"<h3 class='payloadinfo-h3'>payload "+n+" info</h3><span style='color: #f1ef43'>path: </span>"+a+"</br><span style='color: #f1ef43'>operation: </span>"+r+"</br>"+o+l+c+("<span style='color: #f1ef43'>sourceClock (node "+a[0]+"): </span>"+JSON.stringify(e.sourceClock)+"</br>")}(C[e].payload,t))},apiResponse:C,setApiResponse:L,sentInstructions:S,setSentInstructions:O,setFinishedExecuting:j,network:b,mostRecentNodeInfo:T,rerenderSim:V}),i.a.createElement(u,{ControlsProps:{setInstructionsToSend:O,finishedExecuting:A,setFinishedExecuting:j,setRunButtonClasses:p,runState:h,setRunState:y,setMostRecentStepCompleted:F},handleTextAreaInput:function(e){var t=document.getElementById("textarea").value;1===document.getElementById("tutorial").classList.length&&document.getElementById("tutorial").classList.add("display-none"),"run run-active"!==m[0]&&t?(p(["run run-active"]),document.getElementById("run").classList.add("run-active")):t||(p(["run"]),document.getElementById("run").classList.remove("run-active"))},apiResponse:C,sentInstructions:S}),i.a.createElement("div",{id:"node-info",className:n[0]},i.a.createElement("svg",{onClick:function(){return X()},id:"node-info-close",className:"node-info-close",viewBox:"0 0 20 20",style:{left:(window.innerWidth>766?window.innerWidth/2-45:window.innerWidth-45)+"px"}},i.a.createElement("path",{fill:"#f1f5fd",d:"M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z"})),i.a.createElement("div",{id:"node-info-wrapper"})),i.a.createElement(w,{network:b,setNetwork:I,sentInstructions:S,setApiResponse:L,simFinishedExecuting:A}))};r.a.render(i.a.createElement(N,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.6304305f.chunk.js.map